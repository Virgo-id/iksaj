<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IKSAJ</title>
  <link rel="icon" type="image/png" href="logo.png" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <style>
  :root {
  --hijau-gelap: #0b2e1d;
  --hijau-lembut: #14452f;
  --kuning-aksen: #fdd835;
}

html, body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  background: linear-gradient(to bottom right, var(--hijau-gelap), var(--hijau-lembut));
  color: #e6f2ea;
  min-height: 100vh;
  overflow-x: hidden; /* Untuk menghindari scroll horizontal */
}

/* MAIN SECTION */
main {
  min-height: 100vh;
  padding: 20px 10px 50px;
  box-sizing: border-box;
}

/* SIDEBAR */
.sidebar {
  position: fixed;
  top: 0;
  right: -220px;
  width: 220px;
  height: 100%;
  background: var(--hijau-gelap);
  box-shadow: -4px 0 10px rgba(0, 0, 0, 0.4);
  transition: right 0.3s ease;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  padding-top: 60px;
  border-left: 2px solid var(--kuning-aksen);
}

.sidebar.tampil {
  right: 0;
}

.sidebar button {
  padding: 15px;
  border: none;
  background: transparent;
  color: #e6f2ea;
  text-align: left;
  font-size: 16px;
  cursor: pointer;
  border-left: 4px solid transparent;
  transition: background 0.2s, border-left 0.3s;
}

.sidebar button:hover {
  background: rgba(255, 255, 255, 0.05);
  border-left: 4px solid var(--kuning-aksen);
}

/* TOGGLE BUTTON */
.toggle {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 40px;
  height: 40px;
  background: var(--hijau-lembut);
  border-radius: 50%;
  cursor: pointer;
  z-index: 1100;
  border: 2px solid var(--kuning-aksen);
  display: flex;
  align-items: center;
  justify-content: center;
}

.toggle img {
  width: 22px;
  height: 22px;
}

/* OVERLAY */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: transparent;
  z-index: 900;
  display: none;
}

.overlay.aktif {
  display: block;
}

/* PAGE CONTENT */
.halaman {
  display: none;
  padding: 20px;
  margin: 10px auto;
  max-width: 800px;
  background-color: rgba(138, 119, 36, 0.1);
  border-radius: 10px;
  border-left: 4px solid var(--kuning-aksen);
  backdrop-filter: blur(3px);
  color: #fefce8;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.halaman.aktif {
  display: block;
}

/* CARDS (JongJava, Puisi, etc.) */
.jj-card {
  margin: 15px 5px;
  border-radius: 10px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.jj-header {
  padding: 10px;
  display: flex;
  flex-direction: column;
}

.jj-header .kategori {
  flex: 1;
  text-align: left;
  font-weight: bold;
}

.jj-header .judul {
  flex: 2;
  text-align: center;
  font-size: 1.3em;
  font-weight: bold;
  margin-top: 6px;
}

.jj-header .penulis {
  flex: 1;
  text-align: center;
  font-size: 0.9em;
  opacity: 0.8;
  margin-bottom: 4px;
}

.like-btn {
  cursor: pointer;
  font-size: 18px;
  user-select: none;
  transition: color 0.3s ease;
  flex-shrink: 0;
}

.jj-body {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
  padding: 0 15px;
  border-bottom: 2px solid var(--kuning-aksen);
  color: #fefce8;
  white-space: pre-wrap; /* Menjaga whitespace & linebreak */
}

h2 {
  color: #fff;
  text-align: center;
}

p {
  color: #d0e4d2;
  margin-top: 0.6em;
  white-space: pre-wrap; /* Menjaga garis baru */
}

/* TIRAI ANIMASI */
#overlay-tirai {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: 2000;
  pointer-events: all;
  overflow: hidden;
  background: transparent;
  display: flex;
}

.tirai {
  background: black;
  width: 50vw;
  height: 100vh;
  transition: transform 2s ease;
}

.tirai.kiri {
  transform: translateX(0);
}

.tirai.kanan {
  transform: translateX(0);
}

#overlay-tirai.buka .tirai.kiri {
  transform: translateX(-100%);
}

#overlay-tirai.buka .tirai.kanan {
  transform: translateX(100%);
}

/* MEDIA QUERIES FOR RESPONSIVENESS */
@media (max-width: 768px) {
  /* Sidebar */
  .sidebar {
    width: 200px; /* Lebar sidebar di layar kecil */
  }

  .toggle {
    top: 10px;
    right: 10px;
    width: 40px;
    height: 40px;
  }

  .sidebar button {
    font-size: 14px;
    padding: 12px;
  }

  .halaman {
    max-width: 100%; /* Lebar halaman penuh */
    margin: 10px;
    padding: 15px;
  }

  .jj-card {
    margin: 10px 0;
  }

  .jj-header {
    padding: 8px;
  }
}

    /* PAGINATION STYLING */
#pagination-jongjava,
#pagination-puisi,
#pagination-cerpen,
#pagination-esai,
#pagination-opini {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 10px;
}

#pagination-jongjava button,
#pagination-puisi button,
#pagination-cerpen button,
#pagination-esai button,
#pagination-opini button {
  padding: 10px 20px;
  margin: 5px;
  background-color: var(--biru-prim);
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 14px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s ease;
}

#pagination-jongjava .prev,
#pagination-puisi .prev,
#pagination-cerpen .prev,
#pagination-esai .prev,
#pagination-opini .prev {
  background-color: var(--merah-prim);
}

#pagination-jongjava .next,
#pagination-puisi .next,
#pagination-cerpen .next,
#pagination-esai .next,
#pagination-opini .next {
  background-color: var(--hijau-prim);
}

#pagination-jongjava button:hover,
#pagination-puisi button:hover,
#pagination-cerpen button:hover,
#pagination-esai button:hover,
#pagination-opini button:hover {
  background-color: #0056b3;
  transform: scale(1.1);
}

#pagination-jongjava .prev:hover,
#pagination-puisi .prev:hover,
#pagination-cerpen .prev:hover,
#pagination-esai .prev:hover,
#pagination-opini .prev:hover {
  background-color: #c82333;
}

#pagination-jongjava .next:hover,
#pagination-puisi .next:hover,
#pagination-cerpen .next:hover,
#pagination-esai .next:hover,
#pagination-opini .next:hover {
  background-color: #218838;
}

#pagination-jongjava button:disabled,
#pagination-puisi button:disabled,
#pagination-cerpen button:disabled,
#pagination-esai button:disabled,
#pagination-opini button:disabled {
  background-color: #dcdcdc;
  cursor: not-allowed;
}

#pagination-jongjava button:disabled:hover,
#pagination-puisi button:disabled:hover,
#pagination-cerpen button:disabled:hover,
#pagination-esai button:disabled:hover,
#pagination-opini button:disabled:hover {
  transform: none;
}

@media (max-width: 480px) {
  /* Sidebar */
  .sidebar {
    width: 180px; /* Lebar sidebar lebih kecil lagi */
  }

  .sidebar button {
    font-size: 12px; /* Ukuran font lebih kecil */
    padding: 10px; /* Padding lebih kecil */
  }

  /* Toggle Button */
  .toggle {
    width: 35px;
    height: 35px;
  }

  .toggle img {
    width: 18px;
    height: 18px;
  }

  /* Konten */
  .halaman {
    padding: 10px;
  }

  .jj-card {
    margin: 10px 0;
  }

  .jj-header {
    font-size: 14px; /* Font size lebih kecil */
  }
}

 </style>
</head>
<body>

  <div class="toggle" onclick="bukaSidebar()">
    <img src="logo.png" alt="Menu" />
  </div>

  <div class="sidebar" id="sidebar">
    <button onclick="tampilkan('beranda')">Beranda</button>
    <button onclick="tampilkan('tentang')">Tentang IKSAJ</button>
    <button onclick="tampilkan('jongjava')">Jong Java</button>
    <button onclick="tampilkan('puisi')">Gudang Puisi</button>
    <button onclick="tampilkan('cerpen')">Cerpen</button>
    <button onclick="tampilkan('esai')">Esai</button>
    <button onclick="tampilkan('opini')">Opini</button>
  </div>

  <div class="overlay" id="overlay" onclick="tutupSidebar()"></div>
  
  <div id="overlay-tirai">
    <div class="tirai kiri"></div>
    <div class="tirai kanan"></div>
  </div>

  <main>
    <!-- Halaman konten yang sudah ada -->
    <div id="beranda" class="halaman aktif">
      <h2>Selamat Datang di IKSAJ</h2>
      <p>Website resmi organisasi IKSAJ Putra Lubangsa. Didedikasikan untuk menyatukan semangat perjuangan santri asal Jawa.</p>
    </div>

    <div id="tentang" class="halaman">
      <h2>Tentang IKSAJ</h2>
      <p>IKSAJ adalah organisasi santri daerah untuk santri asal Jawa di Pondok Pesantren Annuqayah Lubangsa. Menjadi ruang untuk bertumbuh, berkarya, dan mempererat ikatan kekeluargaan daerah.</p>
    </div>

    <div id="jongjava" class="halaman"><h2>Jong Java</h2><div id="daftar-jongjava"></div><div id="pagination-jongjava"></div></div>
    <div id="puisi" class="halaman"><h2>Gudang Puisi</h2><div id="daftar-puisi"></div><div id="pagination-puisi"></div></div>
    <div id="cerpen" class="halaman"><h2>Cerpen</h2><div id="daftar-cerpen"></div><div id="pagination-cerpen"></div></div>
    <div id="esai" class="halaman"><h2>Esai</h2><div id="daftar-esai"></div><div id="pagination-esai"></div></div>
    <div id="opini" class="halaman"><h2>Opini</h2><div id="daftar-opini"></div><div id="pagination-opini"></div></div>
  </main>

  <script>
    const sidebar = document.getElementById("sidebar");
    const overlay = document.getElementById("overlay");

    function bukaSidebar() {
      sidebar.classList.add("tampil");
      overlay.classList.add("aktif");
    }

    function tutupSidebar() {
      sidebar.classList.remove("tampil");
      overlay.classList.remove("aktif");
    }

    function tampilkan(id) {
      document.querySelectorAll('.halaman').forEach(el => el.classList.remove('aktif'));
      document.getElementById(id).classList.add('aktif');
      tutupSidebar();
    }

    // Firebase init
    const firebaseConfig = {
      apiKey: "AIzaSyBYoiXWgNvn-1ZO3tD-ne-6Veevj3FRiMo",
      authDomain: "ikatansantriannuqayahjawa.firebaseapp.com",
      databaseURL: "https://ikatansantriannuqayahjawa-default-rtdb.firebaseio.com",
      projectId: "ikatansantriannuqayahjawa",
      storageBucket: "ikatansantriannuqayahjawa.appspot.com",
      messagingSenderId: "365298387675",
      appId: "1:365298387675:web:901ec7c98db9d18a665afe"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const kontainer = {
      jongjava: document.getElementById("daftar-jongjava"),
      puisi: document.getElementById("daftar-puisi"),
      cerpen: document.getElementById("daftar-cerpen"),
      esai: document.getElementById("daftar-esai"),
      opini: document.getElementById("daftar-opini")
    };

    let dataAll = {
      jongjava: [],
      puisi: [],
      cerpen: [],
      esai: [],
      opini: []
    };

    const itemsPerPage = 5;
    let currentPage = 1;

    // Fungsi pagination
    function paginateData(kategori) {
      const start = (currentPage - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      return dataAll[kategori].slice(start, end);
    }

    function renderPagination(kategori) {
      const paginationContainer = document.getElementById(`pagination-${kategori}`);
      const totalItems = dataAll[kategori].length;
      const totalPages = Math.ceil(totalItems / itemsPerPage);

      paginationContainer.innerHTML = "";

      const prevButton = document.createElement("button");
      prevButton.textContent = "Prev";
      prevButton.disabled = currentPage === 1;
      prevButton.onclick = () => {
        currentPage--;
        renderKategori(kategori);
      };

      const nextButton = document.createElement("button");
      nextButton.textContent = "Next";
      nextButton.disabled = currentPage === totalPages;
      nextButton.onclick = () => {
        currentPage++;
        renderKategori(kategori);
      };

      paginationContainer.appendChild(prevButton);
      paginationContainer.appendChild(nextButton);
    }

    // Fungsi untuk membuat card
    function buatCard(kategori, data) {
      const card = document.createElement("article");
      card.classList.add("jj-card");

      const header = document.createElement("header");
      header.classList.add("jj-header");

      const kategoriSpan = document.createElement("span");
      kategoriSpan.classList.add("kategori");
      kategoriSpan.textContent = kategori.toUpperCase();

      const judulSpan = document.createElement("span");
      judulSpan.classList.add("judul");
      judulSpan.textContent = data.judul || "Judul kosong";

      const penulisSpan = document.createElement("span");
      penulisSpan.classList.add("penulis");
      penulisSpan.textContent = data.penulis || "Penulis";

      const likeBtn = document.createElement("span");
      likeBtn.classList.add("like-btn");

      const likeKey = `like_${kategori}_${data.id}`;
      const liked = localStorage.getItem(likeKey);
      const likeCount = data.like || 0;
      likeBtn.textContent = (liked ? "❤️ " : "🤍 ") + likeCount;
      likeBtn.style.color = liked ? "#ff5252" : "#fdd835";

      likeBtn.onclick = (e) => {
        e.stopPropagation();
        toggleLike(kategori, data, likeBtn, card);
      };

      header.appendChild(kategoriSpan);
      header.appendChild(judulSpan);
      header.appendChild(penulisSpan);
      header.appendChild(likeBtn);

      const body = document.createElement("div");
      body.classList.add("jj-body");
      const isiFormatted = (data.isi || "Tidak ada isi karya.").replace(/\n/g, "<br>");
      body.innerHTML = `<p>${isiFormatted}</p>`;

      header.onclick = () => {
        if (body.style.maxHeight) {
          body.style.maxHeight = null;
        } else {
          body.style.maxHeight = body.scrollHeight + "px";
        }
      };

      card.appendChild(header);
      card.appendChild(body);

      return card;
    }

    function renderKategori(kategori) {
      const kont = kontainer[kategori];
      kont.innerHTML = "";

      const paginatedData = paginateData(kategori);

      if (paginatedData.length === 0) {
        kont.textContent = "Belum ada karya di kategori ini.";
        return;
      }

      paginatedData.forEach(data => {
        const card = buatCard(kategori, data);
        kont.appendChild(card);
      });

      renderPagination(kategori);
    }

    // Fungsi untuk toggle like
 function toggleLike(kategori, data, likeBtn, card) {
  const likeKey = `like_${kategori}_${data.id}`;  // Gunakan kategori dan ID untuk kunci unik
  const liked = localStorage.getItem(likeKey);    // Periksa apakah sudah pernah memberi like
  
  if (liked) {
    alert("Kamu sudah memberi like pada karya ini!");
    return; // Jika sudah memberi like, hentikan eksekusi fungsi
  }

  // Update like di data lokal
  data.like = (data.like || 0) + 1;
  
  // Simpan ke Firebase
  const karyaRef = firebase.database().ref(`${kategori}/${data.id}`);
  karyaRef.update({
    like: data.like
  });

  // Tandai bahwa user sudah memberi like
  localStorage.setItem(likeKey, "true");

  // Update tombol like
  likeBtn.textContent = "❤️ " + data.like;
  likeBtn.style.color = "#ff5252";  // Merah (warna like)
  
  renderKategori(kategori); // Re-render untuk memperbarui tampilan
}


    // Ambil data dari Firebase
    db.ref("jongjava").on("child_added", (snapshot) => {
      dataAll.jongjava.push(snapshot.val());
      renderKategori("jongjava");
    });
    db.ref("puisi").on("child_added", (snapshot) => {
      dataAll.puisi.push(snapshot.val());
      renderKategori("puisi");
    });
    db.ref("cerpen").on("child_added", (snapshot) => {
      dataAll.cerpen.push(snapshot.val());
      renderKategori("cerpen");
    });
    db.ref("esai").on("child_added", (snapshot) => {
      dataAll.esai.push(snapshot.val());
      renderKategori("esai");
    });
    db.ref("opini").on("child_added", (snapshot) => {
      dataAll.opini.push(snapshot.val());
      renderKategori("opini");
    });
</script>


  <script>
  window.onload = () => {
  // Disable scroll dulu
  document.body.style.overflow = 'hidden';

  setTimeout(() => {
    document.getElementById('overlay-tirai').classList.add('buka');
  }, 800);

  setTimeout(() => {
    const overlay = document.getElementById('overlay-tirai');
    overlay.style.pointerEvents = 'none';
    overlay.style.opacity = '0';
    document.body.style.overflow = 'auto';

    setTimeout(() => {
      overlay.style.display = 'none';
    }, 300);
  }, 2800);
};
</script>
</body>
</html> 
